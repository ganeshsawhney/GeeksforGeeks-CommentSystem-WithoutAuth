{% comment %}
  Something that django_comments does not provide:
  An individual template for a single comment, to easily be reused.

  This include is also used by the Ajax comments view.
  The div id should be "c{id}", because the comment.get_absolute_url() points to it.

  NOTE: to override the displayed date format, don't replace this template.
  Instead, define DATETIME_FORMAT in a locale file. Requires setting:

   FORMAT_MODULE_PATH = 'settings.locale'

  Then create 'settings/locale/XY/formats.py' with:

   DATETIME_FORMAT = '...'

  This should give you consistent dates across all views.
{% endcomment %}
{% load i18n %}

        <div style="border:2px;border-style:ridge; border-radius: 3px;padding: 15px; background-color: #E6E6FA;" {% if preview %} id="comment-preview"{% else %} id="c{{ comment.id }}"{% endif %} class="comment-item">
          {% if preview %}<h4><b>{% trans "Preview of your comment" %}</b></h4>{% endif %}
            <h4>
              {% if comment.url %}<a href="{{ comment.url }}" rel="nofollow">{% endif %}
              {% if comment.name %}

              <b style="color: green;">{{ comment.name }}</b>{% else %}{% trans "Anonymous" %}{% endif %}{% comment %}
              {% endcomment %}{% if comment.url %}</a>{% endif %}

              <span class="comment-date" style="font-size: 13px;">{% blocktrans with submit_date=comment.submit_date %}on {{ submit_date }}{% endblocktrans %}</span>


              

</h4>


<style type="text/css">
    .star-ratings-rating-full{
    transform:scale(0.6);
    }
    .star-ratings-rating-empty{
    transform:scale(0.6);
    }
</style>
            
{% if comment.is_public %}
{% if not preview %}
  {% load ratings %}
  <font style="font-size: 78%;">
  {% ratings comment %}
  </font>
  {% endif %}{% endif %}




            {% load md2 %}
            {% if not comment.is_public %}({% trans "Flagged Inapproriate" %}){% endif %}
            {% if comment.is_public %}
            {% if not preview and comment.comment|length > 200 %}
<div class="{{ comment.id }}more-less">
<div class="{{ comment.id }}more-block">
{% endif %}

            <div class="comment-text" style="color: black;">{{ comment.comment|markdown:"fenced-code-blocks,code-friendly, code-color: noclasses|linenos,recipe" }}</div>
            {% if not preview and comment.comment|length > 200 %}
</div></div>


{% endif %}
<br>

            {% if USE_THREADEDCOMMENTS and not preview %}<a href="#c{{ comment.id }}" data-comment-id="{{ comment.id }}" class="btn btn-xs btn-default comment-reply-link">{% trans "Reply" %}</a>{% endif %}


            {% if not preview %}
            <a href="http://127.0.0.1:8000{% url 'comments-flag' comment.pk %}" class="btn btn-xs btn-default comment-flag-link">{% trans "Flag Inappropriate" %}</a>
            <a href="http://127.0.0.1:8000{% url 'comments-delete' comment.pk %}" class="btn btn-xs btn-default comment-delete-link">{% trans "Delete" %}</a>
            {% endif %}
            {% endif %}

        </div>
<br>

<script type="text/javascript">

$(function(){

// The height of the content block when it's not expanded
var adjustheight = 80;
// The "more" link text
var moreText = "+More";
// The "less" link text
var lessText = "- Less";

// Sets the .more-block div to the specified height and hides any content that overflows
$(".{{ comment.id }}more-less .{{ comment.id }}more-block").css('height', adjustheight).css('overflow', 'hidden');

// The section added to the bottom of the "more-less" div
$(".{{ comment.id }}more-less").append('<p class="continued">[&hellip;]</p><a href="#" class="btn btn-default btn-xs adjust"></a>');

$("a.adjust").text(moreText);

$(".adjust").toggle(function() {
    $(this).parents("div:first").find(".{{ comment.id }}more-block").css('height', 'auto').css('overflow', 'visible');
    // Hide the [...] when expanded
    $(this).parents("div:first").find("p.continued").css('display', 'none');
    $(this).text(lessText);
  }, function() {
    $(this).parents("div:first").find(".{{ comment.id }}more-block").css('height', adjustheight).css('overflow', 'hidden');
    $(this).parents("div:first").find("p.continued").css('display', 'block');
    $(this).text(moreText);
});
});

</script>