{% load comments i18n crispy_forms_tags fluent_comments_tags %}

{% if not form.target_object|comments_are_open %}
    <p>{% trans "Comments are closed." %}</p>
{% else %}
    <form id="comment-form-{{ form.target_object.pk }}" data-object-id="{{ form.target_object.pk }}" action="{% comment_form_target %}" method="post" class="{{ form.helper.form_class|default:'js-comments-form comments-form form-horizontal' }}"
          data-ajax-action="{% url 'comments-post-comment-ajax' %}">
      {% if next %}<div><input type="hidden" name="next" value="{{ next }}" /></div>{% endif %}

      {% crispy form %}
      <a href = "javascript:void(0)" onclick = "document.getElementById('light').style.display='block';document.getElementById('fade').style.display='block'">Comment cheatsheet</a>
    <div id="light" class="white_content"><a href = "javascript:void(0)" onclick = "document.getElementById('light').style.display='none';document.getElementById('fade').style.display='none'">Close</a><br>
    {% load markdown_deux_tags %}{% markdown_cheatsheet %}</div>
    <div id="fade" class="black_overlay"></div>
  <br><br>
          <input type="submit" name="post" class="btn btn-sm btn-success" value="{% trans 'Post' %}" />
          <input type="submit" name="preview" class="btn btn-sm btn-primary" value="{% trans 'Preview' %}" />
          {% ajax_comment_tags for form.target_object %}

    </form>
{% endif %}
