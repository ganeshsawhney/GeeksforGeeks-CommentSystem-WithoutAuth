{% load i18n %}
<!-- <style>
    #{{ id }} .star-ratings-rating-full, #{{ id }} .star-ratings-rating-empty {
        width: {{ icon_width }}px;
        height: {{ icon_height }}px;
    }

    #{{ id }} .star-ratings-rating-empty {
        background-position: -{{ icon_width }}px 0;
    }

    {% if user.is_authenticated %}
    #{{ id }} .star-ratings-rating-full:hover, #{{ id }} .star-ratings-rating-empty:hover {
        background-position: -{{ icon_width|add:icon_width }}px 0;
    }
    {% endif %}
</style> -->

<div id="{{ id }}">
  <div class="vote">
    <div class="up-vote"></div>
    <div class="down-vote"></div>
  </div>
  </div>
<br>

  <div id="{{ id }}">
<div id="{{ id }}" class="star-ratings" data-max-rating="{{ star_count }}" data-avg-rating="{{ rating.average }}">
    {% block rating_stars %}
        <div class="star-ratings-rating-stars-container">
            <div class="star-ratings-rating-background" >
                    
                        {% if user.is_authenticated %}
                         
                        <a href="{% url 'ratings:rate' rating.content_type_id rating.object_id %}?return={{ request.path }}" data-score="{{ 1 }}" class="star-ratings-rate-action like"> <span style="font-size: 20px !important; color: blue;" class="glyphicon glyphicon-thumbs-up" ></span></a> &nbsp

                        <a href="{% url 'ratings:rate' rating.content_type_id rating.object_id %}?return={{ request.path }}" data-score="{{ -1 }}" class="star-ratings-rate-action dislike"> <span style="font-size: 20px !important; color: red;" class="glyphicon glyphicon-thumbs-Down" aria-hidden="true"></span></a> &nbsp
                        {% else %}
                        <a href="http://127.0.0.1:8000/admin">
                            <span class="star-ratings-rating-empty" title="{% trans 'Log in to rate' as title_login %}{{ title_login|escape }}"></span>
                        </a>
                        {% endif %}
                    


            </div>

        </div>
    {% endblock %}
    {% block rating_detail %}
    {% block rating_average %}
    <div class="star-ratings-rating-average" style="display:inline-block"><b>{% trans 'Average: ' %}</b> <span class='star-ratings-rating-value' style="display:inline-block">{{ rating.average|floatformat:"-2" }}</span></div>

    <div class="star-ratings-rating-count" style="display:inline-block"><b>{% trans 'Votes: ' %}</b> <span class='star-ratings-rating-value' style="display:inline-block">{{ rating.count }}</span></div>




<script>

$(document).ready(function(){

$("#{{ id }} .star-ratings-rating-average").hide();
// $("#{{ id }} .star-ratings-rating-count").hide();

{% if user_rating %}
{% if user_rating.score == 1 %}
$("#{{ id }} .glyphicon-thumbs-up").addClass("glyphglowl");

{% else %} 
$("#{{ id }} .glyphicon-thumbs-down").addClass("glyphglowd");
{% endif %}
{% endif %}




var athehieght=$("#{{ id }} .star-ratings-rating-average .star-ratings-rating-value").html();
var bthehieght=$("#{{ id }} .star-ratings-rating-count .star-ratings-rating-value").html();
var variablewu=100;
var variablewd=0;
if(athehieght<0)
{
    variablewd=(athehieght*-1)*100;
    variablewu=100-variablewd;
}
if(athehieght>0)
{
    variablewu=athehieght*100;
    variablewd=100-variablewu;
}
if(athehieght==0)
{
    variablewu=50;
    variablewd=50;
}
if(athehieght==-1)
{
    variablewd=100;
    variablewu=0;
}
if(athehieght==1)
{
    variablewu=100;
    variablewd=0;
}

if(bthehieght==0)
{
    variablewu=0;
    variablewd=100;
}

$("#{{ id }} .up-vote").width(variablewu+'%');
$("#{{ id }} .down-vote").width(variablewd+'%');

if(bthehieght==0)
{
    variablewu=0;
    variablewd=0;
}

var stry='<b>Likes:</b> '+variablewu+'%'+' <b>Dislikes:</b> '+variablewd+'%';

$("#{{ id }} .star-ratings-rating-percent .star-ratings-rating-value").html(stry);

});


$( "#{{ id }} .like" ).click(function() {

$("#{{ id }} .glyphicon-thumbs-up").addClass("glyphglowl");

$("#{{ id }} .glyphicon-thumbs-down").removeClass("glyphglowd");

setTimeout(function(){
var athehieght=$("#{{ id }} .star-ratings-rating-average .star-ratings-rating-value").html();
var variablewu=100;
var variablewd=0;
if(athehieght<0)
{
    variablewd=(athehieght*-1)*100;
    variablewu=100-variablewd;
}
if(athehieght>0)
{
    variablewu=athehieght*100;
    variablewd=100-variablewu;
}
if(athehieght==0)
{
    variablewu=50;
    variablewd=50;
}
if(athehieght==-1)
{
    variablewd=100;
    variablewu=0;
}
if(athehieght==1)
{
    variablewu=100;
    variablewd=0;
}
$("#{{ id }} .up-vote").width(variablewu+'%');
$("#{{ id }} .down-vote").width(variablewd+'%');


var stry='<b>Likes:</b> '+variablewu+'%'+' <b>Dislikes:</b> '+variablewd+'%';

$("#{{ id }} .star-ratings-rating-percent .star-ratings-rating-value").html(stry);

     },
  1000);

});






$( "#{{ id }} .dislike" ).click(function() {


$("#{{ id }} .glyphicon-thumbs-down").addClass("glyphglowd");

$("#{{ id }} .glyphicon-thumbs-up").removeClass("glyphglowl");


setTimeout(function(){

var athehieght=$("#{{ id }} .star-ratings-rating-average .star-ratings-rating-value").html();
var variablewu=100;
var variablewd=0;
if(athehieght<0)
{
    variablewd=(athehieght*(-1))*100;
    variablewu=100-variablewd;
}
if(athehieght>0)
{
    variablewu=athehieght*100;
    variablewd=100-variablewu;
}
if(athehieght==0)
{
    variablewu=50;
    variablewd=50;
}
if(athehieght==-1)
{
    variablewd=100;
    variablewu=0;
}
if(athehieght==1)
{
    variablewu=100;
    variablewd=0;
}
$("#{{ id }} .up-vote").width(variablewu+'%');
$("#{{ id }} .down-vote").width(variablewd+'%');


var stry='<b>Likes:</b> '+variablewu+'%'+' <b>Dislikes:</b> '+variablewd+'%';

$("#{{ id }} .star-ratings-rating-percent .star-ratings-rating-value").html(stry);

     },
  1000);




});

</script>

  <style type="text/css">
    .glyphglowl{
    text-shadow: 0 0 15px black;
}
    .glyphglowd{
    text-shadow: 0 0 15px black;
}

      .vote{
    width: 300px;
    border: 1px solid black;
    height: 7px;
}

.up-vote{
    float: left;
    height: 5px;
    background: cyan;
}

.down-vote{
    float: left;
    height: 5px;
    background: white;
}
  </style>


    <div style="display: inline;" >
    &nbsp || &nbsp
    <div class="star-ratings-rating-percent" style="display:inline-block"><span class='star-ratings-rating-value' style="display:inline-block"></span></div>



    {% endblock rating_average %}

    
    <div class="star-ratings-errors"></div>
    {% endblock rating_detail %}
</div>

</div>
</div>
<script type="text/javascript">

$('#{{ id }} .dislike').on('click',function(){
      $("#{{ id }} .val .star-ratings-rating-value").html("DisLiked");
});
$('#{{ id }} .like').on('click',function(){
      $("#{{ id }} .val .star-ratings-rating-value").html("Liked");
});
</script>